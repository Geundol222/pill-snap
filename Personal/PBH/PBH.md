# 🧪 실험 일지

## 1️⃣ 이미지 선명도 개선

- 저화질/흐릿한 알약 이미지를 우선 추출
- 전처리(Sharpening, CLAHE) 적용 및 품질 향상
- 개선 후 원본과 비교하여 결과 검증

---

### 🧩 실험 1. CLAHE & Unsharp Masking (비교하기)
- **CHAHE**: 밝기/대비를 개선
- **Unsharp Mask**: 엣지 강조

⚙️ 실행 파라미터 : CLAHE & Unsharp Mask 파라미터 조정 후 이미지 적용
- `CLAHE_CLIP** = 2.0`
- `CLAHE_TILE** = (8, 8)`
- `UNSHARP_AMOUNT = 1.2`  
- `UNSHARP_RADIUS = 1.2`  
- `UNSHARP_THRESHOLD = 2`

📊 **분석 및 결론**
- Unsharp Mask의 엣지 강조 + CLAHE 밝기 보정으로 **색 변색**과 **그림자 강조** 현상 발생

---

### 🧩 실험 2. CLAHE 기법 적용 & 파라미터 수정

⚙️ 실행 파라미터:
- `CLAHE_CLIP = 1.5`  
- `CLAHE_TILE = (12,12)`

📊 **분석 및 결론**  
- 과도한 선명도 개선 + 이미지 변색 개선 → **Unsharp Mask 제거**  
- CLAHE 단독 적용이 더 안정적임

---

### 🧩 실험 3. Test Image 자동 선명도 개선

-  **predict 과정**에서 선명도 개선 자동 반영  
-  `infer.py` 내부 코드 수정 → **파일 변경에도 동일하게 적용 가능**  
-  원본 test 이미지 파일은 수정하지 않음

📊 **분석 및 결론**  
- 파일 무결성 유지하면서 **자동 선명도 개선 가능**

---

### 📈 YOLOv12s 모델 학습 결과
- 선명도 개선 반영 → 학습 수행  
- 🏆 **Kaggle Score: 0.98532** 기록  

---

## 2️⃣ YOLO v12 XL 모델 학습 실험 (Colab 환경)

- ⚙️ 환경: **코랩 A100 GPU** + **코랩 L4 GPU** (평균 메모리: {A100: 41.6GB, L4: 22.5GB})  
- ❌ L4 GPU 이하에서는 메모리 부족으로 실행 불가  
- 📊 가중치 & 파라미터 수: **59,210,846**

---

### 🧩 실험 1. `batch=16, imgsz=960, epoch=10`
- ❌ **GPU 메모리 오버** → 실행 불가  

### 🧩 실험 2. `batch=8, imgsz=960, epoch=10`
- ⏱️ A100 기준 약 **2시간 소요**  
- ❌ L4 GPU: 여전히 메모리 부족 발생  
- 📉 mAP@[0.75:0.95] : 0.xx (실험 불완전)  

### 🧩 실험 3. `batch=4, imgsz=640, epoch=20`
- ⏱️ L4 GPU 기준 약 **3시간 소요**  
- 📉 mAP@[0.75:0.95] : 0.xx (실험 불완전) 

---

### 📊 분석 및 결론
- 🚨 **개인이 XL 모델 학습하기엔 자원 부담이 너무 큼**  
- ⚖️ 파라미터/가중치 규모가 크기 때문에 추가 학습은 **중단 결정**  